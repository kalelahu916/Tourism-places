<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tourist Finder</title>
<style>
body{font-family:Arial;margin:0;background:#f2f2f2}
header{background:#0d6efd;color:#fff;text-align:center;padding:15px;font-size:20px}
.container{padding:15px}
input,button{
 width:100%;padding:12px;margin-top:10px;
 border-radius:6px;font-size:16px;border:1px solid #ccc
}
button{background:#0d6efd;color:#fff;border:none}
.place{background:#fff;margin-top:10px;padding:10px;border-radius:6px}
.small{font-size:13px;color:#555}
#loader{text-align:center;font-size:18px;margin-top:15px;display:none}
.spin{animation:spin 1s linear infinite;display:inline-block}
@keyframes spin{100%{transform:rotate(360deg)}}
</style>
</head>

<body>
<header>ğŸŒ Tourist Finder</header>

<div class="container">
<input id="city" placeholder="Enter city name (Delhi, Pune...)">
<button onclick="searchCity()">ğŸ” Search City</button>

<button onclick="getLocation()">ğŸ“¡ Use My Location</button>

<div id="loader">
 ğŸ” Searching... <span class="spin">â³</span>
</div>

<div id="results"></div>
</div>

<script>
async function searchCity(){
 let city=document.getElementById("city").value;
 if(!city){alert("Enter city name");return;}
 loader.style.display="block";
 results.innerHTML="";

 const geo = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${city}`);
 const loc = await geo.json();
 if(!loc[0]){alert("City not found"); loader.style.display="none"; return;}
 showPlaces({coords:{latitude:loc[0].lat,longitude:loc[0].lon}});
}

function getLocation(){
 loader.style.display="block";
 results.innerHTML="";
 navigator.geolocation.getCurrentPosition(showPlaces,()=>alert("Permission denied"));
}

async function showPlaces(pos){
 let lat=pos.coords.latitude;
 let lon=pos.coords.longitude;

 const query = `
 [out:json][timeout:20];
 (
   node(around:50000,${lat},${lon})["tourism"];
 );
 out 50;`;

 const res = await fetch("https://overpass-api.de/api/interpreter",{
   method:"POST",
   body:query
 });
 const data = await res.json();

 function dist(lat1,lon1,lat2,lon2){
   let R=6371;
   let dLat=(lat2-lat1)*Math.PI/180;
   let dLon=(lon2-lon1)*Math.PI/180;
   let a=Math.sin(dLat/2)**2+
     Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*
     Math.sin(dLon/2)**2;
   return R*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)));
 }

 let places=data.elements.map(p=>{
   let d=dist(lat,lon,p.lat,p.lon);
   return {name:p.tags.name||"Unnamed",distance:d};
 });

 places.sort((a,b)=>a.distance-b.distance);

 loader.style.display="none";
 results.innerHTML="";

 places.slice(0,30).forEach((p,i)=>{
   results.innerHTML+=`
   <div class="place">
     <b>ğŸ† #${i+1} ${p.name}</b>
     <div class="small">ğŸ“ ${p.distance.toFixed(1)} km away</div>
   </div>`;
 });
}
</script>
</body>
</html>
