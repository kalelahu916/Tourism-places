<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tourist Finder</title>
<style>
body{font-family:Arial;margin:0;background:#f2f2f2}
header{background:#0d6efd;color:#fff;text-align:center;padding:15px;font-size:20px}
.container{padding:15px}
input,button{
 width:100%;padding:12px;margin-top:10px;
 border-radius:6px;font-size:16px;border:1px solid #ccc
}
button{background:#0d6efd;color:#fff;border:none}
.tabs{display:flex;margin-top:10px}
.tab{
 flex:1;text-align:center;padding:10px;
 background:#ddd;border-radius:6px;margin:2px;cursor:pointer
}
.tab.active{background:#0d6efd;color:#fff}
.place{background:#fff;margin-top:10px;padding:10px;border-radius:6px}
.small{font-size:13px;color:#555}
#loader{text-align:center;font-size:18px;margin-top:15px;display:none}
.spin{animation:spin 1s linear infinite;display:inline-block}
@keyframes spin{100%{transform:rotate(360deg)}}
</style>
</head>

<body>
<header>ğŸŒ Tourist Finder</header>

<div class="container">
<input id="city" placeholder="Enter city name">
<button onclick="searchCity()">ğŸ” Search City</button>
<button onclick="getLocation()">ğŸ“¡ Use My Location</button>

<div class="tabs">
 <div class="tab active" id="tourTab" onclick="setMode('tourism')">ğŸ Tourist</div>
 <div class="tab" id="hotelTab" onclick="setMode('hotel')">ğŸ¨ Hotels</div>
</div>

<div id="loader">ğŸ” Searching... <span class="spin">â³</span></div>
<div id="results"></div>
</div>

<script>
let mode="tourism";
let currentPos=null;

function setMode(m){
 mode=m;
 tourTab.classList.remove("active");
 hotelTab.classList.remove("active");
 if(m==="tourism") tourTab.classList.add("active");
 else hotelTab.classList.add("active");
 if(currentPos) showPlaces(currentPos);
}

async function searchCity(){
 let city=document.getElementById("city").value;
 if(!city) return alert("Enter city");
 loader.style.display="block";
 const geo=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${city}`);
 const loc=await geo.json();
 if(!loc[0]){alert("City not found"); loader.style.display="none"; return;}
 currentPos={coords:{latitude:loc[0].lat,longitude:loc[0].lon}};
 showPlaces(currentPos);
}

function getLocation(){
 loader.style.display="block";
 navigator.geolocation.getCurrentPosition(p=>{
   currentPos=p; showPlaces(p);
 },()=>alert("Permission denied"));
}

async function showPlaces(pos){
 let lat=pos.coords.latitude;
 let lon=pos.coords.longitude;

 let filter = mode==="tourism"
  ? '["tourism"]'
  : '["tourism"="hotel"]';

 const query=`
 [out:json][timeout:20];
 (
   node(around:50000,${lat},${lon})${filter};
 );
 out 50;`;

 const res=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:query});
 const data=await res.json();

 function dist(a,b,c,d){
  let R=6371,dLat=(c-a)*Math.PI/180,dLon=(d-b)*Math.PI/180;
  let x=Math.sin(dLat/2)**2+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(dLon/2)**2;
  return R*(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)));
 }

 let places=data.elements.map(p=>({
  name:p.tags.name||"Unnamed",
  distance:dist(lat,lon,p.lat,p.lon)
 }));

 places.sort((a,b)=>a.distance-b.distance);

 loader.style.display="none";
 results.innerHTML="";
 places.slice(0,30).forEach((p,i)=>{
  results.innerHTML+=`
   <div class="place">
    <b>ğŸ† #${i+1} ${p.name}</b>
    <div class="small">ğŸ“ ${p.distance.toFixed(1)} km away</div>
   </div>`;
 });
}
</script>
</body>
</html>
